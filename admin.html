<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Mer3i</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body{font-family:Arial,sans-serif;background:#f4f6f8;padding:20px}
    .card{background:#fff;max-width:520px;margin:auto;padding:20px;border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,.1)}
    h2{text-align:center;margin:0 0 10px}
    .muted{color:#666;font-size:14px}
    button{width:100%;padding:14px;margin:8px 0;border:none;border-radius:10px;font-size:16px;background:#2563eb;color:#fff}
    button.danger{background:#dc2626}
    .hide{display:none}
    .admin-content {
  display: none;
    }
  </style>
  <!-- ğŸ”’ Admin Lock: Telegram only + Owner only -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
(function () {
  // âœ… Ø¶Ø¹ Telegram ID ØªØ¨Ø¹Ùƒ Ù‡Ù†Ø§
  const OWNER_TG_ID = 5423756075;

  // 1) Ù„Ø§Ø²Ù… ØªÙƒÙˆÙ† Ø§Ù„ØµÙØ­Ø© Ù…ÙØªÙˆØ­Ø© Ø¯Ø§Ø®Ù„ Telegram WebApp
  const tg = window.Telegram && window.Telegram.WebApp;
  if (!tg) {
    document.documentElement.innerHTML = `
      <h2 style="font-family:Arial;text-align:center;margin-top:40px">
        âŒ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ø§ ØªÙÙØªØ­ Ø¥Ù„Ø§ Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
      </h2>`;
    return;
  }

  // 2) Ù„Ø§Ø²Ù… ÙŠÙˆØ¬Ø¯ user id
  const user = tg.initDataUnsafe && tg.initDataUnsafe.user;
  if (!user || !user.id) {
    document.documentElement.innerHTML = `
      <h2 style="font-family:Arial;text-align:center;margin-top:40px">
        âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      </h2>`;
    return;
  }

  // 3) Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ù‡Ùˆ Ø£Ù†Øª ÙÙ‚Ø·
  if (Number(user.id) !== OWNER_TG_ID) {
    document.documentElement.innerHTML = `
      <h2 style="font-family:Arial;text-align:center;margin-top:40px">
        ğŸš« Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„
      </h2>
      <p style="font-family:Arial;text-align:center">
        Ù‡Ø°Ù‡ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø§Ù„Ùƒ ÙÙ‚Ø·.
      </p>`;
    return;
  }

  // âœ… Ø¥Ø°Ø§ ÙˆØµÙ„Ù†Ø§ Ù„Ù‡Ù†Ø§ => Ø£Ù†Øª Ø§Ù„Ù…Ø§Ù„Ùƒ
  tg.ready();
})();
</script>
</head>

<body>
  <!-- Ø´Ø§Ø´Ø© Ø±ÙØ¶ -->
  <div id="denied" class="card hide">
    <h2>ğŸš« Ù…Ù…Ù†ÙˆØ¹</h2>
    <p class="muted">Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·.</p>
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
  <div id="admin" class="card hide">
    <h2>ğŸ›  Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Mer3i</h2>
    <p class="muted" id="who"></p>

    <button onclick="alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
    <button onclick="alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    <button onclick="alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡')">ğŸ’¬ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
    <button class="danger" onclick="Telegram.WebApp.close()">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
  </div>

  <script>
    const ADMIN_ID = 5423756075; // Ù‡Ø°Ø§ ID ØªØ¨Ø¹Ùƒ Ø¨Ø§Ù„ØµÙˆØ±Ø©

    const tg = window.Telegram?.WebApp;
    if (tg) tg.ready();

    const user = tg?.initDataUnsafe?.user;
    const uid = user?.id;

    if (uid === ADMIN_ID) {
      document.getElementById("admin").classList.remove("hide");
      document.getElementById("who").textContent =
        `âœ… Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±: ${user.first_name || ''} â€” ID: ${uid}`;
    } else {
      document.getElementById("denied").classList.remove("hide");
    }
  </script>
  <script>
  // 1) Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
  const ROLES = {
    OWNER: "owner",
    ADMIN: "admin",
    EDITOR: "editor",
    SUPPORT: "support",
    VIEWER: "viewer"
  };

  // 2) Ù‡Ù†Ø§ ØªØ­Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø­Ø³Ø¨ Telegram ID
  const ADMINS = {
    5423756075: { name: "Mer3i", role: ROLES.OWNER },

    1111111111: { name: "Ali", role: ROLES.ADMIN },     // ÙƒÙ„ Ø´ÙŠØ¡ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§
    2222222222: { name: "Sara", role: ROLES.EDITOR },   // ÙŠØ¶ÙŠÙ/ÙŠØ¹Ø¯Ù„ Ù…Ù†ØªØ¬Ø§Øª ÙÙ‚Ø·
    3333333333: { name: "Omar", role: ROLES.SUPPORT },  // Ø±Ø¯ÙˆØ¯/Ø¯Ø¹Ù… ÙÙ‚Ø·
  };

  function getCurrentUserRole() {
    const user = window.Telegram?.WebApp?.initDataUnsafe?.user;
    if (!user) return null;
    return ADMINS[user.id]?.role || null;
  }

  // 3) ØµÙ„Ø§Ø­ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±
  const PERMISSIONS = {
    [ROLES.OWNER]:  { products: true, orders: true, support: true, users: true, settings: true },
    [ROLES.ADMIN]:  { products: true, orders: true, support: true, users: true, settings: false },
    [ROLES.EDITOR]: { products: true, orders: false, support: false, users: false, settings: false },
    [ROLES.SUPPORT]:{ products: false, orders: true, support: true, users: false, settings: false },
    [ROLES.VIEWER]: { products: true, orders: false, support: false, users: false, settings: false },
  };

  // 4) Ø¯Ø§Ù„Ø© ØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ù„Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
  function can(feature) {
    const role = getCurrentUserRole();
    if (!role) return false;
    return !!PERMISSIONS[role]?.[feature];
  }

  // 5) Ù…Ø«Ø§Ù„: Ø£Ø®ÙÙŠ Ø¹Ù†Ø§ØµØ± Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ù„Ø§Ø²Ù… ØªØ¶ÙŠÙ data-feature)
  window.addEventListener("load", () => {
    document.querySelectorAll("[data-feature]").forEach(el => {
      const feature = el.getAttribute("data-feature");
      if (!can(feature)) el.style.display = "none";
    });

    // Ø¥Ø°Ø§ Ù…Ø´ Ø£Ø¯Ù…Ù†: Ø§Ù…Ù†Ø¹ ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
    const role = getCurrentUserRole();
    if (!role) {
      document.body.innerHTML = "<h3 style='text-align:center;margin-top:40px'>âŒ Ù„Ø§ ØªÙ…Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>";
    }
  });
    <div data-feature="products">...</div>
<div data-feature="orders">...</div>
<div data-feature="users">...</div>
</script>
</body>
</html>
