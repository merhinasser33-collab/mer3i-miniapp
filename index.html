<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mer3i Market</title>

  <style>
    :root{
      --blue:#2f6fed;
      --gray:#eef2f7;
      --text:#111827;
      --muted:#6b7280;
      --card:#ffffff;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
    }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
      background:#f6f7fb;
      color:var(--text);
    }
    .wrap{max-width:420px;margin:0 auto;padding:20px;}
    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px;
    }
    .center{display:flex;flex-direction:column;align-items:center;gap:14px;}
    h1{margin:6px 0 0;font-size:34px;letter-spacing:.2px}
    p{margin:0;color:var(--muted);line-height:1.6;text-align:center}
    .btn{
      width:100%;
      border:0;
      border-radius:14px;
      padding:16px 14px;
      font-size:18px;
      cursor:pointer;
      transition:.15s transform, .15s opacity;
    }
    .btn:active{transform:scale(.99);opacity:.92}
    .btn-primary{background:var(--blue);color:#fff;font-weight:700}
    .btn-light{background:#e9edf6;color:#111827;font-weight:700}
    .btn-dark{background:#111827;color:#fff;font-weight:700}
    .row{display:flex;gap:10px;width:100%}
    .input{
      width:100%;
      padding:14px 14px;
      border-radius:12px;
      border:1px solid #d7deea;
      background:#fff;
      font-size:16px;
      outline:none;
    }
    .label{width:100%;text-align:right;font-weight:700;color:#374151;margin-top:8px}
    .error{
      width:100%;
      background:#fee2e2;
      color:#991b1b;
      padding:10px 12px;
      border-radius:12px;
      display:none;
      font-size:14px;
      line-height:1.5;
    }
    .success{
      width:100%;
      background:#dcfce7;
      color:#14532d;
      padding:10px 12px;
      border-radius:12px;
      display:none;
      font-size:14px;
      line-height:1.5;
    }
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:14px;
    }
    .link{
      color:var(--blue);
      font-weight:700;
      cursor:pointer;
      user-select:none;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:14px;
    }
    .tile{
      background:#ffffff;
      border-radius:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.06);
      padding:14px;
      min-height:92px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }
    .tile span{font-weight:800}
    .badge{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:var(--gray);
      color:#374151;
      font-weight:700;
    }
    .small{font-size:13px;color:var(--muted)}
    .hidden{display:none !important;}
  </style>
</head>

<body>
  <div class="wrap">

    <!-- âœ… Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div id="viewHome" class="card center">
      <h1>Mer3i Market ğŸ›’</h1>
      <p>Ø£Ù‡Ù„Ù‹Ø§ Ø¨Ùƒ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙÙ‘Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¢Ù†.</p>

      <button id="btnGoLogin" class="btn btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ”</button>
      <button id="btnGoSections" class="btn btn-light">Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</button>
      <button id="btnContact" class="btn btn-dark">Ø§Ø³ØªÙØ³Ø§Ø± ğŸ’¬</button>

      <p class="small">Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø³Ù†ÙƒÙ…Ù„Ù‡Ù… Ø®Ø·ÙˆØ© Ø®Ø·ÙˆØ© Ù„Ø§Ø­Ù‚Ù‹Ø§.</p>
    </div>

    <!-- âœ… Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="viewLogin" class="card hidden">
      <div class="topbar">
        <div class="link" id="backFromLogin">âœ•</div>
        <div style="font-weight:900;font-size:18px">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ”</div>
        <div style="width:24px"></div>
      </div>

      <div class="error" id="loginError"></div>
      <div class="success" id="loginSuccess"></div>

      <div class="label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
      <input id="email" class="input" type="email" placeholder="example@gmail.com" autocomplete="email" />

      <div class="label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</div>
      <input id="password" class="input" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />

      <div style="height:10px"></div>

      <button id="btnLogin" class="btn btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>

      <div class="row" style="margin-top:10px">
        <button id="btnCreate" class="btn btn-light" style="flex:1">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
        <button id="btnReset" class="btn btn-light" style="flex:1">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
      </div>

      <div style="margin-top:12px" class="small">
        * Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø®Ø·Ø£ (auth/too-many-requests) Ø¬Ø±Ù‘Ø¨ Ø¨Ø¹Ø¯ Ù‚Ù„ÙŠÙ„ Ø£Ùˆ ØºÙŠÙ‘Ø± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.
      </div>
    </div>

    <!-- âœ… ØµÙØ­Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
    <div id="viewSections" class="card hidden">
      <div class="topbar">
        <div class="link" id="backFromSections">Ø±Ø¬ÙˆØ¹</div>
        <div style="font-weight:900;font-size:18px">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="link" id="btnLogout" title="Ø®Ø±ÙˆØ¬">Ø®Ø±ÙˆØ¬</div>
      </div>

      <p style="text-align:right;margin:0 0 8px;color:var(--muted)">
        Ø§Ø®ØªØ± Ù‚Ø³Ù…Ù‹Ø§ Ù„Ù„Ø¯Ø®ÙˆÙ„:
      </p>

      <div class="grid">
        <div class="tile" data-section="store">
          <div class="badge">Ø§Ù„Ù…ØªØ¬Ø±</div>
          <span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
        </div>

        <div class="tile" data-section="myStore">
          <div class="badge">Ù…ØªØ¬Ø±ÙŠ</div>
          <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø±</span>
        </div>

        <div class="tile" data-section="profile">
          <div class="badge">Ø­Ø³Ø§Ø¨ÙŠ</div>
          <span>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span>
        </div>

        <div class="tile" data-section="cart">
          <div class="badge">Ø§Ù„Ø³Ù„Ø©</div>
          <span>Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ</span>
        </div>

        <div class="tile" data-section="ads">
          <div class="badge">Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</div>
          <span>Ø§Ù„Ø¹Ø±ÙˆØ¶</span>
        </div>

        <div class="tile" data-section="custom">
          <div class="badge">Ø·Ù„Ø¨Ø§Øª</div>
          <span>Ø·Ù„Ø¨Ø§Øª Ù…Ø®ØµØµØ©</span>
        </div>
      </div>

      <div id="sectionResult" style="margin-top:14px" class="small"></div>
    </div>

  </div>

  <!-- Firebase v9 (CDN) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      sendPasswordResetEmail,
      signOut
    } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

    // âœ… 1) Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase Ù‡Ù†Ø§
    const firebaseConfig = {
      apiKey: "PASTE_API_KEY",
      authDomain: "PASTE_AUTH_DOMAIN",
      projectId: "PASTE_PROJECT_ID",
      appId: "PASTE_APP_ID",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª
    const viewHome = document.getElementById("viewHome");
    const viewLogin = document.getElementById("viewLogin");
    const viewSections = document.getElementById("viewSections");

    const loginError = document.getElementById("loginError");
    const loginSuccess = document.getElementById("loginSuccess");

    const emailEl = document.getElementById("email");
    const passEl  = document.getElementById("password");

    // Ø£Ø²Ø±Ø§Ø±
    document.getElementById("btnGoLogin").onclick = () => show("login");
    document.getElementById("btnGoSections").onclick = () => show("sections");
    document.getElementById("btnContact").onclick = () => alert("Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ âœ…");

    document.getElementById("backFromLogin").onclick = () => show("home");
    document.getElementById("backFromSections").onclick = () => show("home");

    document.getElementById("btnLogin").onclick = login;
    document.getElementById("btnCreate").onclick = createAccount;
    document.getElementById("btnReset").onclick = resetPassword;
    document.getElementById("btnLogout").onclick = async () => {
      await signOut(auth);
      show("home");
    };

    // Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ø«Ø§Ù„)
    const sectionResult = document.getElementById("sectionResult");
    document.querySelectorAll(".tile").forEach(tile => {
      tile.addEventListener("click", () => {
        const s = tile.dataset.section;
        sectionResult.textContent = "ÙØªØ­Øª Ù‚Ø³Ù…: " + s + " âœ… (Ù†Ø¶ÙŠÙ ØµÙØ­Ø§Øª ÙƒÙ„ Ù‚Ø³Ù… Ù„Ø§Ø­Ù‚Ù‹Ø§)";
      });
    });

    function show(which){
      viewHome.classList.add("hidden");
      viewLogin.classList.add("hidden");
      viewSections.classList.add("hidden");

      if(which === "home") viewHome.classList.remove("hidden");
      if(which === "login") viewLogin.classList.remove("hidden");
      if(which === "sections") viewSections.classList.remove("hidden");
    }

    function setMsg(type, msg){
      loginError.style.display = "none";
      loginSuccess.style.display = "none";
      if(type === "error"){
        loginError.textContent = msg;
        loginError.style.display = "block";
      }else{
        loginSuccess.textContent = msg;
        loginSuccess.style.display = "block";
      }
    }

    // âœ… 2) Ø¯Ø®ÙˆÙ„ â†’ Ù†Ø¬Ø§Ø­ â†’ Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ø£Ù‚Ø³Ø§Ù… (Ù‡Ø°Ø§ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)
    async function login(){
      const email = emailEl.value.trim();
      const password = passEl.value;

      if(!email || !password){
        setMsg("error", "Ø§ÙƒØªØ¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.");
        return;
      }

      try{
        await signInWithEmailAndPassword(auth, email, password);
        setMsg("ok", "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ âœ… ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø§Ù„Ø¢Ù†...");
        // ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ø§Ø´Ø± Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        show("sections");
      }catch(e){
        setMsg("error", humanFirebaseError(e));
      }
    }

    async function createAccount(){
      const email = emailEl.value.trim();
      const password = passEl.value;

      if(!email || !password){
        setMsg("error", "Ø§ÙƒØªØ¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 6 Ø£Ø­Ø±Ù.");
        return;
      }

      try{
        await createUserWithEmailAndPassword(auth, email, password);
        setMsg("ok", "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ù„Ø£Ù‚Ø³Ø§Ù…...");
        show("sections");
      }catch(e){
        setMsg("error", humanFirebaseError(e));
      }
    }

    async function resetPassword(){
      const email = emailEl.value.trim();
      if(!email){
        setMsg("error", "Ø§ÙƒØªØ¨ Ø¨Ø±ÙŠØ¯Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø§Ø¶ØºØ· Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.");
        return;
      }
      try{
        await sendPasswordResetEmail(auth, email);
        setMsg("ok", "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ âœ…");
      }catch(e){
        setMsg("error", humanFirebaseError(e));
      }
    }

    // âœ… 3) Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ù…Ù† Ù‚Ø¨Ù„ â†’ Ø¯Ø®Ù„Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
    onAuthStateChanged(auth, (user) => {
      if(user){
        // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„
        show("sections");
      }else{
        // ØºÙŠØ± Ù…Ø³Ø¬Ù„
        show("home");
      }
    });

    function humanFirebaseError(e){
      const code = (e && e.code) ? e.code : "";
      if(code.includes("auth/too-many-requests")) return "Ø·Ù„Ø¨Ø§Øª ÙƒØ«ÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§. Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ù‹Ø§ Ø«Ù… Ø¬Ø±Ù‘Ø¨ Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŒ Ø£Ùˆ Ø£Ø¹Ø¯ ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.";
      if(code.includes("auth/wrong-password")) return "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.";
      if(code.includes("auth/user-not-found")) return "Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„. Ø§Ø¶ØºØ· (Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨).";
      if(code.includes("auth/invalid-email")) return "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.";
      if(code.includes("auth/email-already-in-use")) return "Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ù‹Ø§. Ø¬Ø±Ù‘Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.";
      if(code.includes("auth/weak-password")) return "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© (Ø§Ø¬Ø¹Ù„Ù‡Ø§ 6 Ø£Ø­Ø±Ù Ø£Ùˆ Ø£ÙƒØ«Ø±).";
      if(code.includes("auth/operation-not-allowed")) return "Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„Ø© Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Authentication.";
      return "Ø­ØµÙ„ Ø®Ø·Ø£: " + (code || e.message || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ");
    }
  </script>
</body>
</html>
