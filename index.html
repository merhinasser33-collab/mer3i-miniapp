<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Mer3i Market</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background:#f5f6fa;
    }
    .wrap{
      max-width:420px;
      margin:20px auto;
      padding:10px;
    }
    .card{
      background:#fff;
      border-radius:14px;
      padding:18px;
      box-shadow:0 6px 16px rgba(0,0,0,.08);
      text-align:center;
    }
    h1{margin:0 0 10px}
    .ok{color:green;font-weight:bold}
    .btn{
      width:100%;
      padding:14px;
      margin-top:10px;
      border:none;
      border-radius:12px;
      font-size:16px;
      cursor:pointer;
    }
    .blue{background:#2f7df6;color:#fff}
    .gray{background:#e5e8ef}
    .dark{background:#111;color:#fff}
    .hide{display:none}
    .muted{color:#666;font-size:14px;margin-top:10px}
  </style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <h1>ğŸ›’ Mer3i Market âœ…</h1>

    <p class="ok">ØªÙ… Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</p>

    <p id="info" class="muted"></p>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <button class="btn blue">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    <button class="btn gray">ğŸ’¬ Ø§Ø³ØªÙØ³Ø§Ø±</button>

    <!-- Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) -->
    <button id="adminBtn" class="btn dark hide"
      onclick="window.location.href='admin.html'">
      ğŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    </button>

    <button class="btn gray" onclick="location.reload()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>

    <p class="muted" id="debug"></p>
  </div>
</div>

<script>
  /* Ø±Ù‚Ù…Ùƒ Ø£Ù†Øª ÙÙ‚Ø· (Ø§Ù„Ù…Ø¯ÙŠØ±) */
  const ADMIN_ID = 5423756075;

  const tg = window.Telegram?.WebApp;

  if (!tg) {
    document.getElementById("info").innerText =
      "âŒ Ø§ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… ÙÙ‚Ø·";
  } else {
    tg.ready();
    tg.expand();

    const user = tg.initDataUnsafe?.user;

    if (!user) {
      document.getElementById("info").innerText =
        "âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…";
    } else {
      document.getElementById("info").innerHTML =
        `Telegram ID: <b>${user.id}</b><br>
         Ø§Ù„Ø§Ø³Ù…: <b>${user.first_name || ""}</b><br>
         username: <b>${user.username ? "@"+user.username : "-"}</b>`;

      document.getElementById("debug").innerText =
        "WEBAPP: YES / USER: YES";

      /* Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø· */
      if (Number(user.id) === Number(ADMIN_ID)) {
        document.getElementById("adminBtn").classList.remove("hide");
      }
    }
  }
</script>
</body>
</html>
