<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Mer3i Market</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f6fa;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2f80ed;
      color: #fff;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    main {
      padding: 20px;
    }
    button {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #fff;
      color: #2f80ed;
      font-weight: bold;
    }
    .card {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
  </style>
</head>

<body>

<header>
  <div>ğŸ›’ Mer3i Market</div>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</header>

<main>
  <div class="card">
    <h3>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ğŸ‘‹</h3>
    <p>Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†.</p>
    <p id="userInfo"></p>
  </div>

  <div class="card">
    <h4>ğŸ”’ Ù…Ù„Ø§Ø­Ø¸Ø©</h4>
    <p>
      Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.
    </p>
  </div>
</main>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getAuth,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDdChxB8Axden4r5TChcL_wuwuGUZfL0yk",
    authDomain: "mer3imarket.firebaseapp.com",
    projectId: "mer3imarket",
    storageBucket: "mer3imarket.firebasestorage.app",
    messagingSenderId: "318791325244",
    appId: "1:318791325244:web:2a35c7fe774ab1772f5539",
    measurementId: "G-4ZR3G6DEN4"
  };

  // Init
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // ğŸ” Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      // ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„ â†’ Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ login
      window.location.href = "login.html";
    } else {
      // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø³ÙŠØ·Ø©
      document.getElementById("userInfo").innerText =
        user.email ? `ğŸ“§ ${user.email}` : `ğŸ“± ${user.phoneNumber}`;
    }
  });

  // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
  window.logout = async () => {
    await signOut(auth);
    window.location.href = "login.html";
  };
</script>

</body>
</html>
